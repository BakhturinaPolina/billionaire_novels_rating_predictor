%% Mermaid DAG — Reliability & Reproducibility
flowchart TD
    subgraph S01[Stage 01–02: Foundation]
      A1[Seed unification] --> A2[Path audit & replace]
      A2 --> A3[Pareto constraint in Stage 05]
      A3 --> A4[Unified ledger schema + normalizer]
    end

    subgraph S02[Stage 03–04: Quality]
      B1[Pytests minimal set] --> B2[GitHub Actions CI]
      A4 --> B1
    end

    subgraph S03[Stage 05–06: Features]
      C1[Quartile binning] --> C2[Topic labeling outputs]
      B2 --> C1
    end

    subgraph S04[Stage 07: Mini-run & Docs]
      D1[Make mini target] --> D2[Docs & MCP docs]
      C2 --> D1
    end

    classDef crit fill:#fde68a,stroke:#b45309,color:#000;
    A1:::crit; A3:::crit; A4:::crit; B2:::crit; D1:::crit
